<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">



	<title>Diper</title>
</head>
<div id="todo">
<header style="background-color: #ffffff;">
	<div fxLayout="row" fxLayoutAlign="start center" class="clase1" style="background-color: #ffffff;">
		<div class="clase2" fxFlex="30" >
			<img fxFlex="100" src="assets/logodiper.png" alt="Diper" style="height: 75%; width: 75%">
    </div>
    <div fxFlex=40></div>
    <div class="clase3" style="top:20px" fxFlex="30" fxLayoutAlign="end center">
      
      
            <mat-form-field fxFlex="50" appearance="outline" style="padding-right: 15px;
            padding-left: 15px;">
              <mat-label>Fecha</mat-label>
              <input matInput placeholder="Fecha" value="{{jsfecha}}" readonly="true">
            </mat-form-field>          
           
            <mat-form-field fxFlex="50" appearance="outline" style="padding-right: 15px; padding-left: 15px;">
              <mat-label>Pedido</mat-label>
              <input matInput placeholder="Fecha" value="{{jsfecha}}" readonly="true">
            </mat-form-field>
            
      

    </div>
    
  
  </div>
</header>

<body  style="background-color: #c7e6a7; height: 100%;">
  <br><br><br>
  <div class="clase5" style="background-color: white; top:20px; " >
    <div fxLayout="row" fxLayoutAlign="start center">
    <label fxFlex="60" style="top: 20px; width:auto; font-size:26px; font-weight: bold;">Datos de Cliente</label>
    
        <mat-form-field fxFlex="20" appearance="standard" style="top:10px;margin-left: auto; width:auto !important; padding-right: 4%;">
          <mat-label>No. Cliente</mat-label>
          <input matInput #NoCliente placeholder="Numero de Cliente" value="" readonly="false">            
        </mat-form-field>
        <button #buscar fxFlex="10" color=accent *ngIf="!visibilidad" mat-flat-button (click)="visibilidad = !visibilidad; getClientes(NoCliente.value)">{{visibilidad ? 'Ocultar' : 'Buscar'}}</button>
        <button #ocultar fxFlex="10" color=accent *ngIf="visibilidad" mat-flat-button (click)="visibilidad = !visibilidad; Cliente=null">{{visibilidad ? 'Ocultar' : 'Buscar'}}</button>
      </div>
      <hr>
    <br>
    <form name="datos_Cliente" *ngIf="visibilidad && existe">
    
      <mat-form-field appearance="standard" style="width:47% !important; padding-right: 6%">
      <mat-label>Cliente</mat-label>
      <input #cliente matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Nombre}} {{clientes.cliente[0].Cln_Apellido}}" readonly="true">            
    </mat-form-field>
    <mat-form-field appearance="standard" style="width:47% !important; padding-right: 0%">
      <mat-label>RFC</mat-label>
      <input #rfc matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_RFC}}" readonly="true">            
    </mat-form-field>
    <mat-form-field appearance="standard" style="width:47% !important; padding-right: 6%">
      <mat-label>Domicilio</mat-label>
      <input #domicilio matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Direccion}}" readonly="true">            
    </mat-form-field>
    <mat-form-field appearance="standard" style="width:47% !important; padding-right: 0%">
        <mat-label>Colonia</mat-label>
        <input #colonia matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Colonia}}" readonly="true">
      </mat-form-field>
      <mat-form-field appearance="standard" style="width:47% !important; padding-right: 6%">
          <mat-label>Ciudad</mat-label>
          <input #ciudad matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Ciudad}}" readonly="true">
        </mat-form-field>
        <mat-form-field appearance="standard" style="width:47% !important; padding-right: 0%">
            <mat-label>Estado</mat-label>
            <input #estado matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Estado}}" readonly="true">            
          </mat-form-field>
          <mat-form-field appearance="standard" style="width:47% !important; padding-right: 6%">
              <mat-label>Telefono</mat-label>
              <input #telefono matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_TelCom}}" readonly="true">            
            </mat-form-field>
            <mat-form-field appearance="standard" style="width:47% !important; padding-right: 0%">
                <mat-label>Compa√±ia</mat-label>
                <input #persona matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Compania}}" readonly="true">            
              </mat-form-field>
              <mat-form-field appearance="standard" style="width:47% !important; padding-right: 6%">
                  <mat-label>Consignar</mat-label>
                  <input #consignar matInput placeholder="Fecha" value="Nombre" readonly="true">            
                </mat-form-field>
                <mat-form-field appearance="standard" style="width:47% !important; padding-right: 0%">
                    <mat-label>E-mail</mat-label>
                    <input #email matInput placeholder="Fecha" value="{{clientes.cliente[0].Cln_Email}}" readonly="true">            
                  </mat-form-field>                  
    </form>
  </div>

  <br><br>
  <div *ngIf="visibilidad && existe" class="clase5" style="background-color: white; top:20px" >
    <div fxLayout="row" fxLayoutAlign="start center">
      <label style="top: 20px; width:40%; font-size:26px; font-weight: bold">Pedido</label>
    
      <mat-form-field appearance="standard" style="top:10px;margin-left: auto; width:17% !important; padding-right: 4%;visibility: hidden">
        <mat-label>No. Cliente</mat-label>
        <input matInput placeholder="Fecha" value="Nombre" readonly="true" >                    
      </mat-form-field>
      
      <button fxFlex="10" color=accent style="margin-left: 10px" mat-flat-button (click)="muebles.push(0);myControl.value='';options=[]" *ngIf="datosMueble.length==muebles.length">+</button>
      <button fxFlex="10" color=warn style="margin-left: 10px" mat-flat-button (click)="muebles.pop(muebles.length); datosMueble.pop(datosMueble.length); importenew.pop(importenew.lenght)" *ngIf="muebles.length>0">-</button>    
      </div>
      <hr>
    
    <div fxLayout="row" fxLayoutAlign="space-evenly center" style="text-align: center; font-weight: bold" >
      <div fxFlex="1"></div>
      <div style="padding-right:5%"fxFlex="15">Pz/Jg</div>
      <div style="padding-right:5%"fxFlex="15">Cant.</div>
      <div style="padding-right:5%"fxFlex="35">Descripcion</div>
      <div style="padding-right:5%"fxFlex="15">Precio Unit.</div>
      <div fxFlex="10">Importe</div>
      <div fxFlex="1"></div>
      
    </div>
    <hr>
    <div *ngFor="let index of muebles;let m = index">
      <div fxLayout="row" fxLayoutAlign="space-evenly center">
        <div fxFlex="1"></div>


        <mat-form-field fxFlex="15" name="Mueble" appearance="fill" style="text-align:center;padding-right:5%">
          <mat-select #tipo placeholder=Tipo (selectionChange)="fillOptions(tipo.value); descripcion.disabled=false; descripcion.value=''">
            <mat-option value=Pieza>            
            Pieza
            </mat-option>
            <mat-option value="Juego">            
            Juego
            </mat-option>
          </mat-select>
        </mat-form-field>
        

        <mat-form-field fxFlex="15" style="padding-right:5% ">          
          <input matInput #cant placeholder="Cantidad" type="number" value="0" (valueChanges)="setCantidad(cant.value, m)" readonly="false">            
        </mat-form-field>
        <mat-form-field fxFlex="35" appearance="fill"style="padding-right:5%;">                    
          <input type="text" #descripcion disabled=true placeholder="Seleccion" matInput [formControl]="myControl" [matAutocomplete]="auto">
          <mat-autocomplete  #auto="matAutocomplete"  (optionSelected)="getPrecio(descripcion.value, clientes.cliente[0].Lpr_Clave, m, tipo.value); descripcion.disabled=true" >                                
          
            <ng-container *ngIf="tipo.value !=null">
            <ng-container *ngIf="tipo.value=='Pieza';then pieza; else juego">
            </ng-container>
          </ng-container>
            <ng-template #pieza>
              <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                {{option}}
                  </mat-option>  
              <!--<mat-option  *ngFor="let index of piezas; let i = index" value={{piezas[i].Pzs_Descripcion}}>            
                    {{piezas[i].Pzs_Descripcion}}
                  </mat-option>-->
            </ng-template>
            
              <ng-template #juego>
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                  {{option}}
                    </mat-option>
                <!--<mat-option  *ngFor="let index of juegos; let i = index" value={{juegos[i].Jgs_Descripcion}}>            
                    {{juegos[i].Jgs_Descripcion}}
                  </mat-option>-->
              </ng-template>
          
            </mat-autocomplete>

        </mat-form-field>
        <mat-form-field fxFlex="15" appearance="fill"style="padding-right:5%">
          <input matInput placeholder="Precio" value="{{importe[m]}}" readonly="true">            
        </mat-form-field>
        <mat-form-field fxFlex="10" appearance="fill">
          <input matInput #imp  placeholder="Importe" value={{importe[m]*cant.value}} (valueChanges)="calcImporte(imp.value, m)" >            
          {{calcTodo(m, tipo.value, cant.value, descripcion.value, imp.value)}}
          
        </mat-form-field>
        <div fxFlex="1"></div>
      </div>
        <!--<label fxFlex="20">
          Alias:
          <input type="text" [formControlName]="i">
        </label>  

      -->

        
      
      
    </div>
    <div fxLayout="row" fxLayoutAlign="space-evenly center" style="text-align: center; font-weight: bold" >
      <div fxFlex="1"></div>
      <div style="padding-right:5%"fxFlex="15"></div>
      <div style="padding-right:5%"fxFlex="15"></div>
      <div style="padding-right:5%"fxFlex="35"></div>
      <div style="padding-right:5%"fxFlex="10">Importe Total:</div>
      <div fxFlex="15">{{tot | currency:'MXN'}}</div>
      <div fxFlex="1"></div>
      
    </div>
    <hr>

    <div fxLayout="row" fxLayoutAlign="space-evenly center">
      <div fxFlex="1"></div>
      <div fxFlex="15"style="text-align:center;padding-right:5%"></div>
      <div fxFlex="15" style="padding-right:5% ">          
      </div>  
      <div fxFlex="35"style="padding-right:5%;">          
      </div>
      <div fxFlex="10"style="padding-right:5%;">          
      </div>
      <button color=accent style="text-align: center" mat-flat-button (click)="genPDF()" *ngIf="datosMueble.length>0">Generar PDF</button>
      <div fxFlex="1"></div>
    </div>
<br>
    </div>
  
 <br><br><br>
</body>
</div>
<footer>
</footer>
</html>